<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="大数据技术整理文档"><title>Scala基本语法和知识点 | 博客</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Scala基本语法和知识点</h1><a id="logo" href="/.">博客</a><p class="description">IT技术博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Scala基本语法和知识点</h1><div class="post-meta">Dec 28, 2016<span> | </span><span class="category"><a href="/categories/Scala/">Scala</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数的定义"><span class="toc-number">1.</span> <span class="toc-text">函数的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#匿名函数"><span class="toc-number">2.</span> <span class="toc-text">匿名函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数："><span class="toc-number">2.1.</span> <span class="toc-text">在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匿名函数，scala中的匿名函数，最多支持22个参数"><span class="toc-number">2.2.</span> <span class="toc-text">匿名函数，scala中的匿名函数，最多支持22个参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高阶函数"><span class="toc-number">3.</span> <span class="toc-text">高阶函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#调用高阶函数最基本的写法"><span class="toc-number">3.1.</span> <span class="toc-text">调用高阶函数最基本的写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果参数可以推断出类型，参数中的类型可以不给定"><span class="toc-number">3.2.</span> <span class="toc-text">如果参数可以推断出类型，参数中的类型可以不给定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果只有一个参数，可以将-省略"><span class="toc-number">3.3.</span> <span class="toc-text">如果只有一个参数，可以将()省略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果方法体可以写成一行，可以将-省略"><span class="toc-number">3.4.</span> <span class="toc-text">如果方法体可以写成一行，可以将{}省略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用-替代参数，省略参数名和-gt"><span class="toc-number">3.5.</span> <span class="toc-text">如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用_替代参数，省略参数名和=></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制语句"><span class="toc-number">4.</span> <span class="toc-text">控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#条件表达式"><span class="toc-number">4.1.</span> <span class="toc-text">条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scala-FOR循环"><span class="toc-number">4.2.</span> <span class="toc-text">scala FOR循环</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for-守护模式"><span class="toc-number">4.2.1.</span> <span class="toc-text">for 守护模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-9乘法表"><span class="toc-number">4.2.2.</span> <span class="toc-text">9*9乘法表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#For绑定中间变量"><span class="toc-number">4.2.3.</span> <span class="toc-text">For绑定中间变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yield-根据一个已有的集合产生一个新的集合"><span class="toc-number">4.2.4.</span> <span class="toc-text">yield 根据一个已有的集合产生一个新的集合</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元组"><span class="toc-number">5.</span> <span class="toc-text">元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#映射是键-值对偶的集合。对偶是元组-tuple-的最简单形态——元组是不同类型的值的聚集。"><span class="toc-number">5.1.</span> <span class="toc-text">映射是键/值对偶的集合。对偶是元组(tuple)的最简单形态——元组是不同类型的值的聚集。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取元组的值"><span class="toc-number">5.2.</span> <span class="toc-text">获取元组的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二元组-gt-只有两个数据的元组"><span class="toc-number">5.3.</span> <span class="toc-text">二元组 => 只有两个数据的元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#元组中的数据可以是任何类型"><span class="toc-number">5.4.</span> <span class="toc-text">元组中的数据可以是任何类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组"><span class="toc-number">6.</span> <span class="toc-text">数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-number">6.1.</span> <span class="toc-text">Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ArrayBuffer"><span class="toc-number">6.2.</span> <span class="toc-text">ArrayBuffer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#集合"><span class="toc-number">7.</span> <span class="toc-text">集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#List"><span class="toc-number">7.1.</span> <span class="toc-text">List</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#不可变List"><span class="toc-number">7.1.1.</span> <span class="toc-text">不可变List</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可变List"><span class="toc-number">7.1.2.</span> <span class="toc-text">可变List</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spark-RDD概念，-可以将RDD理解为分布式的List集合"><span class="toc-number">7.2.</span> <span class="toc-text">Spark RDD概念， 可以将RDD理解为分布式的List集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Set"><span class="toc-number">7.3.</span> <span class="toc-text">Set</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#不可变Set"><span class="toc-number">7.3.1.</span> <span class="toc-text">不可变Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可变Set"><span class="toc-number">7.3.2.</span> <span class="toc-text">可变Set</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-number">7.4.</span> <span class="toc-text">Map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#不可变map"><span class="toc-number">7.4.1.</span> <span class="toc-text">不可变map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可变map"><span class="toc-number">7.4.2.</span> <span class="toc-text">可变map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Map循环"><span class="toc-number">7.4.3.</span> <span class="toc-text">Map循环</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#表达式一"><span class="toc-number">7.4.3.1.</span> <span class="toc-text">表达式一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#表达式二"><span class="toc-number">7.4.3.2.</span> <span class="toc-text">表达式二</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#表达式三"><span class="toc-number">7.4.3.3.</span> <span class="toc-text">表达式三</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#表达式四-只输出key"><span class="toc-number">7.4.3.4.</span> <span class="toc-text">表达式四(只输出key)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模式匹配"><span class="toc-number">8.</span> <span class="toc-text">模式匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-案例1：成绩评价"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 案例1：成绩评价</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例2：成绩评价（升级版）"><span class="toc-number">8.2.</span> <span class="toc-text">案例2：成绩评价（升级版）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配之类型"><span class="toc-number">8.3.</span> <span class="toc-text">模式匹配之类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配之Array-amp-List"><span class="toc-number">8.4.</span> <span class="toc-text">模式匹配之Array & List</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组"><span class="toc-number">8.4.1.</span> <span class="toc-text">对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对List进行模式匹配，与Array类似，但是需要使用List特有的-操作符"><span class="toc-number">8.4.2.</span> <span class="toc-text">对List进行模式匹配，与Array类似，但是需要使用List特有的::操作符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配之Tuple"><span class="toc-number">8.5.</span> <span class="toc-text">模式匹配之Tuple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配之case-class"><span class="toc-number">8.6.</span> <span class="toc-text">模式匹配之case class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配-amp-Option"><span class="toc-number">8.7.</span> <span class="toc-text">模式匹配 & Option</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scala-隐式转化"><span class="toc-number">9.</span> <span class="toc-text">Scala 隐式转化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#程序可见的范围内定义隐式转换函数"><span class="toc-number">9.1.</span> <span class="toc-text">程序可见的范围内定义隐式转换函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在不知不觉中加强现有类型的功能"><span class="toc-number">9.2.</span> <span class="toc-text">在不知不觉中加强现有类型的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用域与导入"><span class="toc-number">9.3.</span> <span class="toc-text">作用域与导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#发生时机"><span class="toc-number">9.4.</span> <span class="toc-text">发生时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#隐式参数"><span class="toc-number">9.5.</span> <span class="toc-text">隐式参数</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h2><p>要定义函数，需要给出函数的名称、参数和函数体，like this:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">abs</span><span class="params">(x : Double)</span></span> = <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) x <span class="keyword">else</span> -x</div></pre></td></tr></table></figure></p>
<p>你必须给出所有参数的类型。不过，只要函数不是递归的，你就不需要指定返回类型。Scala编译器可以通过=符号右侧的表达式的类型推断出返回类型。</p>
<p>如果函数体需要多个表达式完成，可以用代码块。快中最后一个表达式的值就是函数的返回值。举例来说，下面的这个函数返回位于for循环之后的r的值。<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">def <span class="keyword">fac</span>( <span class="keyword">n</span> : Int )=&#123;</div><div class="line">  <span class="keyword">var</span> r = 1</div><div class="line">  <span class="keyword">for</span> (i &lt;- 1 to <span class="keyword">n</span>) r = r * <span class="built_in">i</span></div><div class="line">  <span class="built_in">r</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对于递归函数，我们必须指定返回类型。例如：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fac1</span><span class="params">(n : Int)</span></span><span class="symbol">:Int</span> = <span class="keyword">if</span> (n &lt;= <span class="number">0</span>)<span class="number">1</span> <span class="keyword">else</span> n*fac1(n-<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<p>如果没有返回类型，Scala编译器无法校验n*fac(n-1)的类型是Int</p>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><h3 id="在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数："><a href="#在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数：" class="headerlink" title="在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数："></a>在Scala中，不需要给每一个函数命名，正如你不需要给每一个数字命名一样。以下是一个匿名函数：</h3><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//该函数将传给它的参数乘以3。</span></div><div class="line"></div><div class="line">(x:<span class="keyword">Double</span>)=&gt;<span class="number">3</span> * x</div></pre></td></tr></table></figure>
<p>你当然可以将这个函数存放到变量中：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val triple =<span class="function"><span class="params">(x : Double)</span>=&gt;</span><span class="number">3</span> * x</div></pre></td></tr></table></figure></p>
<p>跟用def一样：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">triple</span><span class="params">(x : Double)</span></span> = <span class="number">3</span> * x</div></pre></td></tr></table></figure></p>
<p>你不需要给函数命名，可以直接将它传递给另一个函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>(<span class="number">3.14</span>,<span class="number">1.42</span>,<span class="number">2.0</span>).map(<span class="function">(<span class="params">x : Double</span>) =&gt;</span> <span class="number">3</span> * x)</div><div class="line"><span class="comment">//Array(9.42,4.26,6.0)</span></div></pre></td></tr></table></figure></p>
<p>在这里，我们告诉map方法：”将每个元素乘以3“。</p>
<p>也可以将函数参数包在花括号当中而不是用圆括号，例如：<br><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Array</span>(<span class="number">3.14</span>,<span class="number">1.42</span>,<span class="number">2.0</span>).map&#123;(x : <span class="keyword">Double</span>) =&gt; <span class="number">3</span> * x&#125;</div><div class="line"></div><div class="line"><span class="comment">//在使用中置表示时（没有句点），这样的写法比较常见。</span></div><div class="line"></div><div class="line"><span class="keyword">Array</span>(<span class="number">3.14</span>,<span class="number">1.42</span>,<span class="number">2.0</span>) map &#123;(x : <span class="keyword">Double</span>) =&gt; <span class="number">3</span> * x&#125;</div></pre></td></tr></table></figure></p>
<h3 id="匿名函数，scala中的匿名函数，最多支持22个参数"><a href="#匿名函数，scala中的匿名函数，最多支持22个参数" class="headerlink" title="匿名函数，scala中的匿名函数，最多支持22个参数"></a>匿名函数，scala中的匿名函数，最多支持22个参数</h3><figure class="highlight julia"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">val max4 = (x:<span class="built_in">Int</span>, y:<span class="built_in">Int</span>) =&gt; <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</div><div class="line">// max4: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) =&gt; <span class="built_in">Int</span> = &lt;function2&gt;</div><div class="line">/*</div><div class="line">scala&gt; max4(<span class="number">1</span>,<span class="number">5</span>)</div><div class="line">res55: <span class="built_in">Int</span> = <span class="number">5</span></div><div class="line">*/</div><div class="line">def max5 = (x:<span class="built_in">Int</span>, y:<span class="built_in">Int</span>) =&gt; <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y </div><div class="line">// max5: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) =&gt; <span class="built_in">Int</span></div></pre></td></tr></table></figure>
<p>// 匿名函数的底层实质上是一个Function的具体的子类实现<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def max6 = new Function2[<span class="string">Int,Int,Int</span>](<span class="link"></span>)&#123;</div><div class="line">  def apply(x:Int,y:Int) = if (x &gt; y) x else y</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>一个接受函数参数的函数，因此它被称做高阶函数（higher-order function）。<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 高阶函数</div><div class="line">def greeting(name:<span class="built_in">String</span>, <span class="function"><span class="keyword">func</span>: <span class="params">(String)</span> =&gt; <span class="title">Unit</span>) &#123;</span></div><div class="line">  <span class="function"><span class="keyword">func</span><span class="params">(name)</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>例1：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">scala&gt; def greeting(name:<span class="built_in">String</span>, <span class="function"><span class="keyword">func</span>: <span class="params">(String)</span> =&gt; <span class="title">Unit</span>) &#123;</span></div><div class="line">     |   <span class="function"><span class="keyword">func</span><span class="params">(name)</span></span></div><div class="line">     | &#125;</div><div class="line">greeting: (name: <span class="built_in">String</span>, <span class="function"><span class="keyword">func</span>: <span class="title">String</span> =&gt; <span class="title">Unit</span>)<span class="title">Unit</span></span></div><div class="line"></div><div class="line">scala&gt; def sayHello(name:<span class="built_in">String</span>) = println(<span class="string">"hello,"</span>+name)</div><div class="line">sayHello: (name: <span class="built_in">String</span>)Unit</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="string">"xiaoming"</span>,sayHello)</div><div class="line">hello,xiaoming</div></pre></td></tr></table></figure></p>
<p>例2：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">scala&gt; greeting(<span class="string">"xiaoming"</span>,sayHello _) <span class="comment">//函数名空格+下划线</span></div><div class="line">hello,xiaoming</div><div class="line"></div><div class="line">scala&gt; def sayHello2(name:<span class="built_in">String</span>) = println(<span class="string">"Hi, "</span> + name)</div><div class="line">sayHello2: (name: <span class="built_in">String</span>)Unit</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="string">"xiaoming"</span>,sayHello2 _)</div><div class="line">Hi, xiaoming</div><div class="line"></div><div class="line">scala&gt; val sayHello3 = <span class="function">(<span class="params">name:<span class="built_in">String</span></span>) =&gt;</span> println(<span class="string">"Good,"</span> + name)</div><div class="line">sayHello3: <span class="function"><span class="params">String</span> =&gt;</span> Unit = <span class="xml"><span class="tag">&lt;<span class="name">function1</span>&gt;</span></span></div><div class="line"></div><div class="line">scala&gt; greeting("xiaoming",sayHello3)</div><div class="line">Good,xiaoming</div></pre></td></tr></table></figure></p>
<h3 id="调用高阶函数最基本的写法"><a href="#调用高阶函数最基本的写法" class="headerlink" title="调用高阶函数最基本的写法"></a>调用高阶函数最基本的写法</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">greeting(<span class="string">"xiaoming"</span>, (<span class="name">name</span><span class="symbol">:String</span>) =&gt; &#123;</div><div class="line">  println(<span class="string">"Good,"</span> + name)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="如果参数可以推断出类型，参数中的类型可以不给定"><a href="#如果参数可以推断出类型，参数中的类型可以不给定" class="headerlink" title="如果参数可以推断出类型，参数中的类型可以不给定"></a>如果参数可以推断出类型，参数中的类型可以不给定</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">greeting(<span class="string">"xiaoming"</span>, (<span class="name">name</span>) =&gt; &#123;</div><div class="line">  println(<span class="string">"Good,"</span> + name)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="如果只有一个参数，可以将-省略"><a href="#如果只有一个参数，可以将-省略" class="headerlink" title="如果只有一个参数，可以将()省略"></a>如果只有一个参数，可以将()省略</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">greeting(<span class="string">"xiaoming"</span>, name =&gt; &#123;</div><div class="line">  println(<span class="string">"Good,"</span> + name)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="如果方法体可以写成一行，可以将-省略"><a href="#如果方法体可以写成一行，可以将-省略" class="headerlink" title="如果方法体可以写成一行，可以将{}省略"></a>如果方法体可以写成一行，可以将{}省略</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">greeting</span><span class="params">(<span class="string">"xiaoming"</span>, name =&gt; println(<span class="string">"Good,"</span> + name)</span></span>)</div></pre></td></tr></table></figure>
<h3 id="如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用-替代参数，省略参数名和-gt"><a href="#如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用-替代参数，省略参数名和-gt" class="headerlink" title="如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用_替代参数，省略参数名和=&gt;"></a>如果一个参数在方法体中只使用一次，而且使用的顺序和参数的顺序一致，可以用_替代参数，省略参数名和=&gt;</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> greeting(<span class="string">"xiaoming"</span>, println(<span class="string">"Good,"</span> + _)) <span class="regexp">//</span> 这个会有问题的</div></pre></td></tr></table></figure>
<h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><h3 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h3><p>// 函数中对于只有一个语句块的方法体，可以省略{}，将语句全部放到=之后<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">max2</span><span class="params">(<span class="symbol">x:</span>Int, <span class="symbol">y:</span>Int)</span></span><span class="symbol">:Int</span> = <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</div></pre></td></tr></table></figure></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="keyword">def</span> max2(x:<span class="keyword">Int</span>, y:<span class="keyword">Int</span>):<span class="keyword">Int</span> = <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</div><div class="line">max2: (x: <span class="keyword">Int</span>, y: <span class="keyword">Int</span>)<span class="keyword">Int</span></div><div class="line">scala&gt; max2(<span class="number">12</span>,<span class="number">5</span>)</div><div class="line">res51: <span class="keyword">Int</span> = <span class="number">12</span></div></pre></td></tr></table></figure>
<p>// 如果方法能够推断出返回值，返回类型可以省略<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="keyword">def</span> max3(x:<span class="keyword">Int</span>, y:<span class="keyword">Int</span>) = <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</div><div class="line">max3: (x: <span class="keyword">Int</span>, y: <span class="keyword">Int</span>)<span class="keyword">Int</span></div><div class="line"></div><div class="line">scala&gt; max3(<span class="number">6</span>,<span class="number">15</span>)</div><div class="line">res52: <span class="keyword">Int</span> = <span class="number">15</span></div></pre></td></tr></table></figure></p>
<h3 id="scala-FOR循环"><a href="#scala-FOR循环" class="headerlink" title="scala FOR循环"></a>scala FOR循环</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">for(<span class="name">value</span> &lt;- <span class="number">1</span> to <span class="number">10</span>) println(<span class="name">value</span>)</div></pre></td></tr></table></figure>
<h4 id="for-守护模式"><a href="#for-守护模式" class="headerlink" title="for 守护模式"></a>for 守护模式</h4><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="built_in">value</span> &lt;- <span class="number">1</span> <span class="built_in">to</span> <span class="number">10</span> <span class="keyword">if</span> <span class="built_in">value</span> % <span class="number">2</span> == <span class="number">0</span>) println(<span class="built_in">value</span>)</div></pre></td></tr></table></figure>
<h4 id="9-9乘法表"><a href="#9-9乘法表" class="headerlink" title="9*9乘法表"></a>9*9乘法表</h4><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> <span class="keyword">to</span> <span class="number">9</span>) &#123;</div><div class="line">  <span class="keyword">for</span> (j &lt;- <span class="number">1</span> <span class="keyword">to</span> i) &#123;</div><div class="line">    <span class="built_in">print</span>(i*j)</div><div class="line">    <span class="built_in">print</span>(<span class="string">" "</span>)</div><div class="line">  &#125;</div><div class="line">  println</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> <span class="keyword">to</span> <span class="number">9</span>;j &lt;- <span class="number">1</span> <span class="keyword">to</span> i) &#123;</div><div class="line">  <span class="keyword">if</span>(j == <span class="number">1</span>) println</div><div class="line">  <span class="built_in">print</span>(i * j)</div><div class="line">  <span class="built_in">print</span>(<span class="string">" "</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span>&#123;</div><div class="line">    i &lt;- <span class="number">1</span> <span class="keyword">to</span> <span class="number">9</span></div><div class="line">    j &lt;- <span class="number">1</span> <span class="keyword">to</span> i</div><div class="line">  &#125; &#123;</div><div class="line">  <span class="keyword">if</span>(j == <span class="number">1</span>) println</div><div class="line">  <span class="built_in">print</span>(i * j)</div><div class="line">  <span class="built_in">print</span>(<span class="string">" "</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="For绑定中间变量"><a href="#For绑定中间变量" class="headerlink" title="For绑定中间变量"></a>For绑定中间变量</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">val names = Array(<span class="string">" www.baidu.com "</span>, <span class="string">"  "</span>, <span class="string">"ibeifeng"</span>, <span class="string">"  "</span>)</div><div class="line"><span class="keyword">for</span>&#123;</div><div class="line">    name &lt;- names</div><div class="line">    tmpname = name<span class="selector-class">.trim</span> <span class="comment">// tmpname默认就是val修饰的，不能显示给定修饰 </span></div><div class="line">    <span class="keyword">if</span> tmpname<span class="selector-class">.length</span> &gt; <span class="number">0</span></div><div class="line">  &#125; &#123;</div><div class="line">  println(tmpname)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="yield-根据一个已有的集合产生一个新的集合"><a href="#yield-根据一个已有的集合产生一个新的集合" class="headerlink" title="yield 根据一个已有的集合产生一个新的集合"></a>yield 根据一个已有的集合产生一个新的集合</h4><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">val <span class="keyword">result</span> = <span class="keyword">for</span>(i &lt;- <span class="number">1</span> <span class="keyword">to</span> <span class="number">10</span>) <span class="keyword">yield</span> <span class="comment">&#123; i * 2&#125;</span></div><div class="line"></div><div class="line">scala&gt; val <span class="keyword">result</span> = <span class="keyword">for</span>(i &lt;- <span class="number">1</span> <span class="keyword">to</span> <span class="number">10</span>) <span class="keyword">yield</span> <span class="comment">&#123; i * 2&#125;</span></div><div class="line"><span class="keyword">result</span>: scala.collection.immutable.IndexedSeq[Int] = Vector(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>,</div><div class="line"><span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>)</div></pre></td></tr></table></figure>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><h3 id="映射是键-值对偶的集合。对偶是元组-tuple-的最简单形态——元组是不同类型的值的聚集。"><a href="#映射是键-值对偶的集合。对偶是元组-tuple-的最简单形态——元组是不同类型的值的聚集。" class="headerlink" title="映射是键/值对偶的集合。对偶是元组(tuple)的最简单形态——元组是不同类型的值的聚集。"></a>映射是键/值对偶的集合。对偶是元组(tuple)的最简单形态——元组是不同类型的值的聚集。</h3><p>元组与Array的优点：假如用Array并不能保留每一个元素原来的数据类型，都是Any,但是元组可以<br><figure class="highlight julia"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="built_in">Array</span>(<span class="string">"gerry"</span>, <span class="number">18</span>, <span class="string">"1921251151"</span>)</div><div class="line">res18: <span class="built_in">Array</span>[<span class="built_in">Any</span>] = <span class="built_in">Array</span>(gerry, <span class="number">18</span>, <span class="number">1921251151</span>)</div><div class="line"></div><div class="line">scala&gt; val tuple = (<span class="string">"gerry"</span>, <span class="number">18</span>, <span class="string">"1921251151"</span>)</div><div class="line">tuple: (<span class="built_in">String</span>, <span class="built_in">Int</span>, <span class="built_in">String</span>) = (gerry,<span class="number">18</span>,<span class="number">1921251151</span>)</div></pre></td></tr></table></figure></p>
<h3 id="获取元组的值"><a href="#获取元组的值" class="headerlink" title="获取元组的值"></a>获取元组的值</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scala&gt; tuple<span class="meta">._1</span></div><div class="line"><span class="symbol">res19:</span> String = gerry</div><div class="line"></div><div class="line">scala&gt; tuple<span class="meta">._2</span></div><div class="line"><span class="symbol">res20:</span> <span class="keyword">Int</span> = <span class="number">18</span></div></pre></td></tr></table></figure>
<h3 id="二元组-gt-只有两个数据的元组"><a href="#二元组-gt-只有两个数据的元组" class="headerlink" title="二元组 =&gt; 只有两个数据的元组"></a>二元组 =&gt; 只有两个数据的元组</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">scala&gt; val tuple=("name",15)</div><div class="line">tuple: (String, Int) = (name,15)</div><div class="line"></div><div class="line">//<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</div><div class="line">//<span class="bullet">*       二元组独有的特性                  *</span></div><div class="line">//<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</div><div class="line">scala&gt; tuple.swap</div><div class="line">res21: (Int, String) = (15,name)</div></pre></td></tr></table></figure>
<h3 id="元组中的数据可以是任何类型"><a href="#元组中的数据可以是任何类型" class="headerlink" title="元组中的数据可以是任何类型"></a>元组中的数据可以是任何类型</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scala&gt; val ha = (<span class="string">"ha.host.name"</span>, (<span class="string">"senior01"</span>,<span class="string">"senior02"</span>,<span class="string">"senior03"</span>))</div><div class="line">ha: (<span class="keyword">String</span>, (<span class="keyword">String</span>, <span class="keyword">String</span>, <span class="keyword">String</span>)) = (ha.host.name,(senior01,senior02,senior</div><div class="line"><span class="number">03</span>))</div></pre></td></tr></table></figure>
<p>多元取元组的值<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">scala&gt; ha._1</div><div class="line">res22: <span class="built_in">String</span> = ha.host.name</div><div class="line"></div><div class="line">scala&gt; ha._2</div><div class="line">res23: (<span class="built_in">String</span>, <span class="built_in">String</span>, <span class="built_in">String</span>) = (senior01,senior02,senior03)</div><div class="line"></div><div class="line">scala&gt; ha._2._1</div><div class="line">res24: <span class="built_in">String</span> = senior01</div><div class="line"></div><div class="line">scala&gt; ha._2._2</div><div class="line">res25: <span class="built_in">String</span> = senior02</div><div class="line"></div><div class="line">scala&gt; ha._2._3</div><div class="line">res26: <span class="built_in">String</span> = senior03</div><div class="line"></div><div class="line">scala&gt; val ha = (<span class="string">"ha.name"</span>, ((<span class="string">"senior01"</span>,<span class="number">8020</span>),(<span class="string">"senior02"</span>,<span class="number">8021</span>),(<span class="string">"senior03"</span>,<span class="number">802</span></div><div class="line"><span class="number">2</span>)))</div><div class="line">ha: (<span class="built_in">String</span>, ((<span class="built_in">String</span>, <span class="built_in">Int</span>), (<span class="built_in">String</span>, <span class="built_in">Int</span>), (<span class="built_in">String</span>, <span class="built_in">Int</span>))) = (ha.name,((senior0</div><div class="line"><span class="number">1</span>,<span class="number">8020</span>),(senior02,<span class="number">8021</span>),(senior03,<span class="number">8022</span>)))</div></pre></td></tr></table></figure></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>下标从0开始，使用()进行数值的set/get，在scala中一般讲Array当做List来使用<br>Array（不可变数组）和ArrayBuffer（可变数组）</p>
<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">scala&gt; val c=<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">5</span>)</div><div class="line">c: <span class="built_in">Array</span>[<span class="literal">Nothing</span>] = <span class="built_in">Array</span>(<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>)</div><div class="line"></div><div class="line">scala&gt; val arr = <span class="keyword">new</span> <span class="built_in">Array</span>[<span class="built_in">Int</span>](<span class="number">5</span>)</div><div class="line">arr: <span class="built_in">Array</span>[<span class="built_in">Int</span>] = <span class="built_in">Array</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">0</span>)=<span class="number">12</span></div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">1</span>)=<span class="number">25</span></div><div class="line"></div><div class="line">scala&gt; arr</div><div class="line">res29: <span class="built_in">Array</span>[<span class="built_in">Int</span>] = <span class="built_in">Array</span>(<span class="number">12</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">1</span>)</div><div class="line">res30: <span class="built_in">Int</span> = <span class="number">25</span></div><div class="line"></div><div class="line">scala&gt; val arr2 = <span class="built_in">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)</div><div class="line">arr2: <span class="built_in">Array</span>[<span class="built_in">Int</span>] = <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</div></pre></td></tr></table></figure>
<h3 id="ArrayBuffer"><a href="#ArrayBuffer" class="headerlink" title="ArrayBuffer"></a>ArrayBuffer</h3><p>arr.toBuffer //转换为arrayBuffer<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//引入可变数组包</span></div><div class="line"><span class="keyword">scala</span>&gt; import <span class="keyword">scala</span>.collection.mutable.ArrayBuffer</div><div class="line">import <span class="keyword">scala</span>.collection.mutable.ArrayBuffer</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; val <span class="keyword">ca</span> = ArrayBuffer[Int]()</div><div class="line"><span class="keyword">ca</span>: <span class="keyword">scala</span>.collection.mutable.ArrayBuffer[Int] = ArrayBuffer()</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">ca</span> +=10</div><div class="line">res31: <span class="keyword">ca</span>.<span class="keyword">type</span> = ArrayBuffer(10)</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">ca</span>+=100</div><div class="line">res32: <span class="keyword">ca</span>.<span class="keyword">type</span> = ArrayBuffer(10, 100)</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">ca</span>++=Array(1,2,3,4)</div><div class="line">res33: <span class="keyword">ca</span>.<span class="keyword">type</span> = ArrayBuffer(10, 100, 1, 2, 3, 4)</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">ca</span>.toArray</div><div class="line">res34: Array[Int] = Array(10, 100, 1, 2, 3, 4)</div></pre></td></tr></table></figure></p>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><h4 id="不可变List"><a href="#不可变List" class="headerlink" title="不可变List"></a>不可变List</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">scala</span>&gt; val <span class="keyword">list</span> = <span class="keyword">List</span>(1,2,3,4,5,6)</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[Int] = <span class="keyword">List</span>(1, 2, 3, 4, 5, 6)</div></pre></td></tr></table></figure>
<p>实质上是调用了::函数，Nil.::(5).::(4).::(3).::(2).::(1)<br>实质是scala中的一个空集合<br><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scala&gt; val <span class="keyword">list</span> = <span class="number">1</span>::<span class="number">2</span>::<span class="number">3</span>::<span class="number">4</span>::<span class="number">5</span>::Nil</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[<span class="keyword">Int</span>] = <span class="keyword">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"></div><div class="line">scala&gt; <span class="keyword">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>):::List(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line">res35: <span class="keyword">List</span>[<span class="keyword">Int</span>] = <span class="keyword">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div></pre></td></tr></table></figure></p>
<p>获取list的元素<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">list</span>(0)</div><div class="line">res36: Int = 1</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">list</span>(2)</div><div class="line">res37: Int = 3</div></pre></td></tr></table></figure></p>
<p>但是list的元素不能改变<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="built_in">list</span>(<span class="number">0</span>)=<span class="number">123</span></div><div class="line">&lt;console&gt;:<span class="number">10</span>: <span class="keyword">error</span>: value update <span class="keyword">is</span> <span class="keyword">not</span> a member <span class="keyword">of</span> List[Int]</div><div class="line">              <span class="built_in">list</span>(<span class="number">0</span>)=<span class="number">123</span></div><div class="line">              ^</div></pre></td></tr></table></figure></p>
<h4 id="可变List"><a href="#可变List" class="headerlink" title="可变List"></a>可变List</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//引入可变List的包</span></div><div class="line">scala&gt; import scala<span class="selector-class">.collection</span><span class="selector-class">.mutable</span><span class="selector-class">.ListBuffer</span></div><div class="line">import scala<span class="selector-class">.collection</span><span class="selector-class">.mutable</span><span class="selector-class">.ListBuffer</span></div></pre></td></tr></table></figure>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">scala</span>&gt; val <span class="keyword">list</span> = ListBuffer[Int]()</div><div class="line"><span class="keyword">list</span>: <span class="keyword">scala</span>.collection.mutable.ListBuffer[Int] = ListBuffer()</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">list</span>+=12</div><div class="line">res39: <span class="keyword">list</span>.<span class="keyword">type</span> = ListBuffer(12)</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">list</span>+=(1,2,3)</div><div class="line">res40: <span class="keyword">list</span>.<span class="keyword">type</span> = ListBuffer(12, 1, 2, 3)</div><div class="line"></div><div class="line"><span class="keyword">scala</span>&gt; <span class="keyword">list</span>++=<span class="keyword">List</span>(4,5,6)</div><div class="line">res41: <span class="keyword">list</span>.<span class="keyword">type</span> = ListBuffer(12, 1, 2, 3, 4, 5, 6)</div><div class="line"><span class="keyword">list</span> -= 1 ## 删除元素1，只删除一个</div><div class="line"><span class="keyword">list</span>.remove(1) ## 删除下标为1的元素</div><div class="line"><span class="keyword">list</span>(0) = 123</div></pre></td></tr></table></figure>
<h3 id="Spark-RDD概念，-可以将RDD理解为分布式的List集合"><a href="#Spark-RDD概念，-可以将RDD理解为分布式的List集合" class="headerlink" title="Spark RDD概念， 可以将RDD理解为分布式的List集合"></a>Spark RDD概念， 可以将RDD理解为分布式的List集合</h3><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="built_in">list</span></div><div class="line">res48: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">123</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"></div><div class="line">## filter返回的结果是给定参数返回为<span class="literal">true</span>的值，如果返回为<span class="literal">false</span>，数据过滤</div><div class="line">scala&gt; <span class="built_in">list</span>.filter(p =&gt; p &lt;= <span class="number">100</span>)</div><div class="line">res50: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"></div><div class="line">## 重复数据去重</div><div class="line">scala&gt; <span class="built_in">list</span></div><div class="line">res52: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">123</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>,</div><div class="line"> <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"></div><div class="line">scala&gt; <span class="built_in">list</span>.distinct</div><div class="line">res53: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">123</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"></div><div class="line">## 数据转换, map函数将集合中所有元素的数据进行一个给定函数的执行，执行结果是最终的集合数据， map一个数据输入 一个数据输出</div><div class="line">scala&gt;  <span class="built_in">list</span>.map(<span class="keyword">value</span> =&gt; &#123;</div><div class="line">     |   <span class="keyword">if</span> (<span class="keyword">value</span>%<span class="number">2</span> == <span class="number">0</span>) &#123;</div><div class="line">     |     <span class="keyword">value</span> * <span class="number">3</span></div><div class="line">     |   &#125; <span class="keyword">else</span> &#123;</div><div class="line">     |     <span class="keyword">value</span> * <span class="number">2</span></div><div class="line">     |   &#125;</div><div class="line">     | &#125;)</div><div class="line">res54: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">246</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">10</span>, <span class="number">18</span>,</div><div class="line"> <span class="number">12</span>, <span class="number">10</span>, <span class="number">18</span>)</div><div class="line"> </div><div class="line"> ## 先进行数据转换，然后进行数据扁平化操作</div><div class="line">## flatMap: 针对给定函数返回的集合类型，进行扁平化处理；最终的结果是给定函数返回集合中的数据类型； 要求给定的参数函数必须返回集合类型</div><div class="line">scala&gt; <span class="built_in">list</span>.flatMap(<span class="number">1</span> <span class="keyword">to</span> _)</div><div class="line">res55: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span></div><div class="line">, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>,</div><div class="line"><span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>,</div><div class="line"><span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>,</div><div class="line"><span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">80</span>, <span class="number">81</span>, <span class="number">82</span>, <span class="number">83</span>, <span class="number">84</span>, <span class="number">85</span>, <span class="number">86</span>, <span class="number">87</span>,</div><div class="line"><span class="number">88</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>, <span class="number">92</span>, <span class="number">93</span>, <span class="number">94</span>, <span class="number">95</span>, <span class="number">96</span>, <span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>, <span class="number">100</span>, <span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">10</span></div><div class="line"><span class="number">6</span>, <span class="number">107</span>, <span class="number">108</span>, <span class="number">109</span>, <span class="number">110</span>, <span class="number">111</span>, <span class="number">112</span>, <span class="number">113</span>, <span class="number">114</span>, <span class="number">115</span>, <span class="number">116</span>, <span class="number">117</span>, <span class="number">118</span>, <span class="number">119</span>, <span class="number">120</span>, <span class="number">121</span>, <span class="number">12</span></div><div class="line"><span class="number">2</span>, <span class="number">123</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>,</div><div class="line"><span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"></div><div class="line"></div><div class="line">## 数据进行排序</div><div class="line"><span class="built_in">list</span> = <span class="built_in">list</span>.sorted # 默认排序</div><div class="line"></div><div class="line">## 偶数前，奇数后</div><div class="line">scala&gt; <span class="built_in">list</span>.sortBy(<span class="keyword">value</span> =&gt; &#123;</div><div class="line">     |   <span class="keyword">if</span> (<span class="keyword">value</span> % <span class="number">2</span> == <span class="number">0</span>) &#123;</div><div class="line">     |     <span class="number">0</span></div><div class="line">     |   &#125; <span class="keyword">else</span> &#123;</div><div class="line">     |     <span class="number">1</span></div><div class="line">     |   &#125;</div><div class="line">     | &#125;)</div><div class="line">res58: scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="type">ListBuffer</span>(<span class="number">4</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">123</span>, <span class="number">3</span>,</div><div class="line"> <span class="number">5</span>, <span class="number">5</span>)</div><div class="line"></div><div class="line">## 数据进行分组</div><div class="line">scala&gt; <span class="built_in">list</span>.groupBy(_%<span class="number">2</span>)</div><div class="line">res61: scala.collection.immutable.<span class="type">Map</span>[<span class="type">Int</span>,scala.collection.<span class="keyword">mutable</span>.<span class="type">ListBuffer</span>[<span class="type">In</span></div><div class="line">t]] = <span class="type">Map</span>(<span class="number">1</span> -&gt; <span class="type">ListBuffer</span>(<span class="number">123</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span> -&gt; <span class="type">ListBuffer</span>(<span class="number">4</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">6</span>))</div><div class="line"></div><div class="line"><span class="built_in">list</span>.reverse ## 数据反转</div><div class="line"><span class="built_in">list</span>.sum</div><div class="line"><span class="built_in">list</span>.max</div><div class="line"><span class="built_in">list</span>.min</div><div class="line"><span class="built_in">list</span>.head</div><div class="line"><span class="built_in">list</span>.tail</div></pre></td></tr></table></figure>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><h4 id="不可变Set"><a href="#不可变Set" class="headerlink" title="不可变Set"></a>不可变Set</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">scala</span>&gt; val <span class="keyword">set</span> = <span class="keyword">Set</span>(1,2,3,4,5,6,5,4,2,1,2)</div><div class="line"><span class="keyword">set</span>: <span class="keyword">scala</span>.collection.immutable.<span class="keyword">Set</span>[Int] = <span class="keyword">Set</span>(5, 1, 6, 2, 3, 4)</div></pre></td></tr></table></figure>
<h4 id="可变Set"><a href="#可变Set" class="headerlink" title="可变Set"></a>可变Set</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import scala.collection._ # 将scala.collection包下的所有类、包、对象全部导入到当前作用域中</div><div class="line">val set = mutable.Set[<span class="string">Int</span>](<span class="link"></span>)</div><div class="line">set += 1</div><div class="line">set ++= List(1,2,3)</div></pre></td></tr></table></figure>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><h4 id="不可变map"><a href="#不可变map" class="headerlink" title="不可变map"></a>不可变map</h4><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// <span class="keyword">Map</span> ==&gt; key/value键值对的集合</div><div class="line">// scala中可以使用二元组来表示key/value键值对，使用<span class="string">"-&gt;"</span>连接key和value</div><div class="line"></div><div class="line">scala&gt; val <span class="keyword">map</span> = <span class="keyword">Map</span>((<span class="string">"key1"</span>, <span class="number">1</span>), (<span class="string">"key2"</span>, <span class="number">2</span>))</div><div class="line"><span class="keyword">map</span>: scala.collection.<span class="keyword">Map</span>[<span class="built_in">String</span>,Int] = <span class="keyword">Map</span>(key1 -&gt; <span class="number">1</span>, key2 -&gt; <span class="number">2</span>)</div><div class="line"></div><div class="line">scala&gt; val <span class="keyword">map</span> = <span class="keyword">Map</span>(<span class="string">"key1"</span> -&gt; <span class="number">1</span>, <span class="string">"key2"</span> -&gt; <span class="number">2</span>)</div><div class="line"><span class="keyword">map</span>: scala.collection.<span class="keyword">Map</span>[<span class="built_in">String</span>,Int] = <span class="keyword">Map</span>(key1 -&gt; <span class="number">1</span>, key2 -&gt; <span class="number">2</span>)</div><div class="line"></div><div class="line">scala&gt; <span class="keyword">map</span>.get(<span class="string">"key1"</span>)</div><div class="line">res65: Option[Int] = Some(<span class="number">1</span>)</div><div class="line"></div><div class="line">//每个<span class="keyword">map</span>的元素可以转化为二元组</div><div class="line">scala&gt; <span class="keyword">map</span>.<span class="keyword">map</span>(tuple =&gt; tuple._1 + tuple._2)</div><div class="line">res66: Iterable[<span class="built_in">String</span>] = List(key11, key22)</div></pre></td></tr></table></figure>
<h4 id="可变map"><a href="#可变map" class="headerlink" title="可变map"></a>可变map</h4><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">val <span class="keyword">map</span> = mutable.<span class="keyword">Map</span>[<span class="built_in">String</span>,Int]()</div><div class="line">scala&gt; <span class="keyword">map</span> += (<span class="string">"gerry"</span> -&gt; <span class="number">12</span>)</div><div class="line">res235: <span class="keyword">map</span>.<span class="keyword">type</span> = <span class="keyword">Map</span>(gerry -&gt; <span class="number">12</span>)</div><div class="line">scala&gt; <span class="keyword">map</span> += ((<span class="string">"gerry"</span>,<span class="number">12</span>),(<span class="string">"tom"</span>,<span class="number">12</span>))</div><div class="line">res237: <span class="keyword">map</span>.<span class="keyword">type</span> = <span class="keyword">Map</span>(gerry -&gt; <span class="number">12</span>)</div><div class="line"><span class="keyword">map</span> -= <span class="string">"gerry"</span></div></pre></td></tr></table></figure>
<h4 id="Map循环"><a href="#Map循环" class="headerlink" title="Map循环"></a>Map循环</h4><figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scala&gt; map</div><div class="line"><span class="function"><span class="title">res76</span>: scala.collection.mutable.Map[String,Int] = Map(key2 -&gt;</span> <span class="number">2</span>, <span class="function"><span class="title">tom</span> -&gt;</span> <span class="number">12</span>, key1</div><div class="line"> -&gt; <span class="number">1</span>, <span class="function"><span class="title">gerry</span> -&gt;</span> <span class="number">12</span>)</div></pre></td></tr></table></figure>
<p>// Map循环</p>
<h5 id="表达式一"><a href="#表达式一" class="headerlink" title="表达式一"></a>表达式一</h5><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scala&gt; map.foreach<span class="comment">(tuple=&gt;println(tuple)</span>)</div><div class="line"><span class="comment">(key2,2)</span></div><div class="line"><span class="comment">(tom,12)</span></div><div class="line"><span class="comment">(key1,1)</span></div><div class="line"><span class="comment">(gerry,12)</span></div></pre></td></tr></table></figure>
<h5 id="表达式二"><a href="#表达式二" class="headerlink" title="表达式二"></a>表达式二</h5><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">scala</span>&gt; <span class="selector-tag">for</span>(entry&lt;-map)&#123;<span class="selector-tag">println</span>(entry._1+<span class="string">":"</span>+entry._2)&#125;</div><div class="line"><span class="selector-tag">key2</span><span class="selector-pseudo">:2</span></div><div class="line"><span class="selector-tag">tom</span><span class="selector-pseudo">:12</span></div><div class="line"><span class="selector-tag">key1</span><span class="selector-pseudo">:1</span></div><div class="line"><span class="selector-tag">gerry</span><span class="selector-pseudo">:12</span></div></pre></td></tr></table></figure>
<h5 id="表达式三"><a href="#表达式三" class="headerlink" title="表达式三"></a>表达式三</h5><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">scala</span>&gt; <span class="selector-tag">for</span>((key,value) &lt;- map) &#123;</div><div class="line">     |   <span class="selector-tag">println</span>(key + <span class="string">":"</span> + value)</div><div class="line">     | &#125;</div><div class="line"><span class="selector-tag">key2</span><span class="selector-pseudo">:2</span></div><div class="line"><span class="selector-tag">tom</span><span class="selector-pseudo">:12</span></div><div class="line"><span class="selector-tag">key1</span><span class="selector-pseudo">:1</span></div><div class="line"><span class="selector-tag">gerry</span><span class="selector-pseudo">:12</span></div></pre></td></tr></table></figure>
<h5 id="表达式四-只输出key"><a href="#表达式四-只输出key" class="headerlink" title="表达式四(只输出key)"></a>表达式四(只输出key)</h5><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">scala&gt; <span class="keyword">for</span>((<span class="built_in">key</span>,<span class="symbol">_</span>) &lt;- <span class="built_in">map</span>) &#123;</div><div class="line">     |   println(<span class="built_in">key</span>)</div><div class="line">     | &#125;</div><div class="line">key2</div><div class="line">tom</div><div class="line">key1</div><div class="line">gerry</div></pre></td></tr></table></figure>
<h2 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h2><ul>
<li><p>模式匹配是Scala中非常有特色，非常强大的一种功能。模式匹配，其实<strong>类似于Java中的switch case语法，即对一个值进行条件判断，然后针对不同的条件，进行不同的处理。</strong></p>
</li>
<li><p>但是Scala的模式匹配的功能比Java的switch case语法的功能要强大地多，Java的switch case语法只能对值进行匹配。但是Scala的模式匹配除了可以对值进行匹配之外，还可以对类型进行匹配、对Array和List的元素情况进行匹配、对case class进行匹配、甚至对有值或没值（Option）进行匹配。</p>
</li>
<li><p>而且对于Spark来说，Scala的模式匹配功能也是极其重要的，在spark源码中大量地使用了模式匹配功能。因此为了更好地编写Scala程序，并且更加通畅地看懂Spark的源码，学好模式匹配非常重要。</p>
</li>
<li><p>Scala是没有Java中的switch case语法，相对应的，Scala提供了更加强大的<strong>match case语法，即模式匹配，</strong>类替代switch case，match case也被称为模式匹配。</p>
</li>
<li><p>Scala的match case与Java的switch case最大的不同点在于，Java的switch case仅能匹配变量的值，比1、2、3等；而Scala的match case可以匹配各种情况，比如变量的类型、集合的元素、有值或无值</p>
</li>
<li><p>match case的语法如下：变量 match { case 值 =&gt; 代码}。如果值为下划线，则代表了不满足以上所有情况下的默认情况如何处理。此外，match case中，<strong>只要一个case分支满足并处理了，就不会继续下一个case分支了。</strong>（与Java不同，java的switch case需要用break阻止）</p>
</li>
<li><p>match case语法最基本的应用，就是对变量的值进行模式匹配。</p>
<h3 id="8-1-案例1：成绩评价"><a href="#8-1-案例1：成绩评价" class="headerlink" title="8.1 案例1：成绩评价"></a>8.1 案例1：成绩评价</h3><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">scala&gt;   def judgeGrade(grade:String)&#123;</div><div class="line">     |     <span class="type">grade</span> <span class="keyword">match</span>&#123;</div><div class="line">     |       <span class="type">case</span> <span class="string">"A"</span>=&gt;println(<span class="string">"Excellent"</span>)</div><div class="line">     |       <span class="type">case</span> <span class="string">"B"</span>=&gt;println(<span class="string">"Good"</span>)</div><div class="line">     |       <span class="type">case</span> <span class="string">"C"</span>=&gt;println(<span class="string">"Just so so"</span>)</div><div class="line">     |       <span class="type">case</span> <span class="keyword">_</span> =&gt;println(<span class="string">"you need work harder"</span>)</div><div class="line">     |     <span class="type">&#125;</span></div><div class="line">     |   &#125;</div><div class="line">judgeGrade: (grade: String)Unit</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"A"</span>)</div><div class="line">Excellent</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"D"</span>)</div><div class="line">you need work harder</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Scala的模式匹配语法，有一个特点在于，可以在case后的条件判断中，不仅仅只是提供一个值，而是可以在值后面再加一个if守卫，进行双重过滤。<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">scala&gt; def judgeGrade(name:String,grade:String)&#123;</div><div class="line">     | <span class="type">grade</span> <span class="keyword">match</span> &#123;</div><div class="line">     | <span class="type">case</span> <span class="string">"A"</span>=&gt;println(name+<span class="string">",you are excellent"</span>)</div><div class="line">     | <span class="type">case</span> <span class="string">"B"</span>=&gt;println(name+<span class="string">",you are good"</span>)</div><div class="line">     | <span class="type">case</span> <span class="string">"C"</span>=&gt;println(name+<span class="string">",you are just so so"</span>)</div><div class="line">     | <span class="type">case</span> <span class="keyword">_</span> <span class="keyword">if</span> name==<span class="string">"leo"</span>=&gt;println(name+<span class="string">",you are a good boy,come on"</span>)</div><div class="line">     | <span class="type">case</span> <span class="keyword">_</span>=&gt;println(<span class="string">"you need to work harder"</span>)</div><div class="line">     | <span class="type">&#125;</span></div><div class="line">     | &#125;</div><div class="line">judgeGrade: (name: String, grade: String)Unit</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"xiaoming"</span>,<span class="string">"B"</span>)</div><div class="line">xiaoming,you are good</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"xiaoming"</span>,<span class="string">"leo"</span>)</div><div class="line">you need to work harder</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"leo"</span>,)</div><div class="line">&lt;console&gt;:<span class="number">1</span>: error: illegal start of <span class="built_in">simple</span> expression</div><div class="line">       judgeGrade(<span class="string">"leo"</span>,)</div><div class="line">                        ^</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"leo"</span>,<span class="string">""</span>)</div><div class="line">leo,you are a good boy,come on</div></pre></td></tr></table></figure></p>
<h3 id="案例2：成绩评价（升级版）"><a href="#案例2：成绩评价（升级版）" class="headerlink" title="案例2：成绩评价（升级版）"></a>案例2：成绩评价（升级版）</h3><ul>
<li>Scala的模式匹配语法，有一个特点在于，<strong>可以将模式匹配的默认情况下划线，替换为一个变量名</strong>，此时模式匹配语法就<strong>会将要匹配的值赋给这个变量</strong>，从而可以在后面的处理语句中使用要匹配的值<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">scala&gt; def judgeGrade(name:<span class="keyword">String</span>,grade:<span class="keyword">String</span>)&#123;</div><div class="line">     | grade <span class="built_in">match</span>&#123;</div><div class="line">     | <span class="keyword">case</span> <span class="string">"A"</span>=&gt;<span class="built_in">println</span>(name+<span class="string">",you are excellent"</span>)</div><div class="line">     | <span class="keyword">case</span> <span class="string">"B"</span>=&gt;<span class="built_in">println</span>(name+<span class="string">",you are good"</span>)</div><div class="line">     | <span class="keyword">case</span> <span class="string">"C"</span>=&gt;<span class="built_in">println</span>(name+<span class="string">",you are just so so"</span>)</div><div class="line">     | <span class="keyword">case</span> _grade <span class="keyword">if</span> name ==<span class="string">"leo"</span>=&gt;<span class="built_in">println</span>(name+<span class="string">",your grade is"</span>+_grade)</div><div class="line">     | <span class="keyword">case</span> _grade=&gt;<span class="built_in">println</span>(<span class="string">"you need work harder,your grade is"</span>+_grade)</div><div class="line">     | &#125;</div><div class="line">     | &#125;</div><div class="line">judgeGrade: (name: <span class="keyword">String</span>, grade: <span class="keyword">String</span>)Unit</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"xiaoming"</span>,<span class="string">"B"</span>)</div><div class="line">xiaoming,you are good</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"xiaoming"</span>,<span class="string">"D"</span>)</div><div class="line">you need work harder,your grade isD</div><div class="line"></div><div class="line">scala&gt; judgeGrade(<span class="string">"leo"</span>,<span class="string">"D"</span>)</div><div class="line">leo,your grade isD</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="模式匹配之类型"><a href="#模式匹配之类型" class="headerlink" title="模式匹配之类型"></a>模式匹配之类型</h3><ul>
<li><p>Scala的模式匹配一个强大之处就在于，可以直接匹配类型，而不是值！！！</p>
</li>
<li><p>对类型匹配语法： <strong>“case 变量：类型=&gt;代码”</strong>，而不是匹配值的<strong>“case 值=&gt;代码”</strong>这种语法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io._</div><div class="line">def processException(e:Exception)&#123;</div><div class="line">e match &#123;</div><div class="line"><span class="keyword">case</span> e1:<span class="function"><span class="params">IllegalArgumentException</span>=&gt;</span>println(<span class="string">"you have illegal arguments!"</span>+e1)</div><div class="line"><span class="keyword">case</span> e1:<span class="function"><span class="params">FileNotFoundException</span>=&gt;</span>println(<span class="string">"cannot find the "</span>+e1)</div><div class="line"><span class="keyword">case</span> e1:<span class="function"><span class="params">IOException</span>=&gt;</span>println(<span class="string">"IO"</span>+e1)</div><div class="line"><span class="keyword">case</span> <span class="function"><span class="params">_</span>=&gt;</span>println(<span class="string">"cannot know which exception you have"</span>)</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="模式匹配之Array-amp-List"><a href="#模式匹配之Array-amp-List" class="headerlink" title="模式匹配之Array &amp; List"></a>模式匹配之Array &amp; List</h3><h4 id="对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组"><a href="#对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组" class="headerlink" title="对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组"></a>对Array进行模式匹配，分别可以匹配带有指定元素的数组、带有指定个数元素的数组、以某元素打头的数组</h4><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//模式匹配之Array</span></div><div class="line">def greeting(arr:<span class="keyword">Array</span>[<span class="keyword">String</span>])&#123;</div><div class="line">arr <span class="built_in">match</span> &#123;</div><div class="line"><span class="keyword">case</span> <span class="keyword">Array</span>(<span class="string">"Leo"</span>)=&gt;<span class="built_in">println</span>(<span class="string">"Hi,Leo!"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">Array</span>(girl1,girl2,girl3)=&gt;<span class="built_in">println</span>(girl1 + <span class="string">"and"</span> + girl2 + <span class="string">"and"</span> + girl3)</div><div class="line"><span class="keyword">case</span> <span class="keyword">Array</span>(<span class="string">"Leo"</span>,_*)=&gt;<span class="built_in">println</span>(<span class="string">"Hi,Leo,please introduce your friends to me."</span>)</div><div class="line"><span class="keyword">case</span> _=&gt;<span class="built_in">println</span>(<span class="string">"hey,who are you ?"</span>)</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//测试</span></div><div class="line">--------------------------------------------------------------------------</div><div class="line">scala&gt; val arr = <span class="keyword">new</span> <span class="keyword">Array</span>[<span class="keyword">String</span>](<span class="number">1</span>)</div><div class="line">arr: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(<span class="keyword">null</span>)</div><div class="line"></div><div class="line"><span class="comment">//匹配带有指定元素的数组</span></div><div class="line">scala&gt; greeting(arr)</div><div class="line">hey,who are you ?</div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">0</span>)=<span class="string">"Leo"</span></div><div class="line"></div><div class="line">scala&gt; greeting(arr)</div><div class="line">Hi,Leo!</div><div class="line">--------------------------------------------------------------------------</div><div class="line"><span class="comment">//匹配指定个数元素的数组</span></div><div class="line">scala&gt; val arr = <span class="keyword">new</span> <span class="keyword">Array</span>[<span class="keyword">String</span>](<span class="number">3</span>)</div><div class="line">arr: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>)</div><div class="line"></div><div class="line">scala&gt; arr</div><div class="line">res10: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>)</div><div class="line"></div><div class="line">scala&gt; greeting(arr)</div><div class="line">nullandnullandnull</div><div class="line">--------------------------------------------------------------------------</div><div class="line"></div><div class="line"><span class="comment">//匹配以某元素打头的数组，在匹配中"_"代表任意单个字符</span></div><div class="line">scala&gt; val arr = <span class="keyword">new</span> <span class="keyword">Array</span>[<span class="keyword">String</span>](<span class="number">2</span>)</div><div class="line">arr: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(<span class="keyword">null</span>, <span class="keyword">null</span>)</div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">0</span>)=<span class="string">"Leo"</span></div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">1</span>)=<span class="string">"_yangz_sh"</span></div><div class="line"></div><div class="line">scala&gt; greeting(arr)</div><div class="line">Hi,Leo,please introduce your friends to me.</div><div class="line"></div><div class="line">scala&gt; val arr = <span class="keyword">new</span> <span class="keyword">Array</span>[<span class="keyword">String</span>](<span class="number">2</span>)</div><div class="line">arr: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(<span class="keyword">null</span>, <span class="keyword">null</span>)</div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">0</span>)=<span class="string">"Leo"</span></div><div class="line"></div><div class="line">scala&gt; arr(<span class="number">1</span>)=<span class="string">"yangz_sh"</span></div><div class="line"></div><div class="line">scala&gt; greeting(arr)</div><div class="line">Hi,Leo,please introduce your friends to me.</div><div class="line"></div><div class="line">scala&gt; arr</div><div class="line">res18: <span class="keyword">Array</span>[<span class="keyword">String</span>] = <span class="keyword">Array</span>(Leo, yangz_sh)</div></pre></td></tr></table></figure>
<h4 id="对List进行模式匹配，与Array类似，但是需要使用List特有的-操作符"><a href="#对List进行模式匹配，与Array类似，但是需要使用List特有的-操作符" class="headerlink" title="对List进行模式匹配，与Array类似，但是需要使用List特有的::操作符"></a>对List进行模式匹配，与Array类似，但是需要使用List特有的::操作符</h4><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">def greeting(<span class="keyword">list</span>:<span class="keyword">List</span>[String])&#123;</div><div class="line"><span class="keyword">list</span> match&#123;</div><div class="line"><span class="keyword">case</span> <span class="string">"Leo"</span>::Nil=&gt;println(<span class="string">"Hi,Leo!"</span>)</div><div class="line"><span class="keyword">case</span> girl1::girl2::girl3::Nil=&gt;println(girl1+<span class="string">"and"</span>+girl2+<span class="string">"and"</span>+girl3)</div><div class="line"><span class="keyword">case</span> <span class="string">"Leo"</span>::tail=&gt;println(<span class="string">"Hi,Leo."</span>)</div><div class="line"><span class="keyword">case</span> _=&gt;println(<span class="string">"hey,who are you ?"</span>)</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 测试</span></div><div class="line">--------------------------------------------------------------------------</div><div class="line"><span class="comment">// 匹配指定个数元素的List</span></div><div class="line">scala&gt; val <span class="keyword">list</span> = <span class="string">"yang"</span>::<span class="string">"zheng"</span>::<span class="string">"2017"</span>::Nil</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[String] = <span class="keyword">List</span>(yang, zheng, <span class="number">2017</span>)</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="keyword">list</span>)</div><div class="line">yangandzhengand2017</div><div class="line"></div><div class="line">--------------------------------------------------------------------------</div><div class="line"></div><div class="line"><span class="comment">// 匹配带有指定元素的数组</span></div><div class="line">scala&gt; val <span class="keyword">list</span> = <span class="keyword">List</span>(<span class="string">"Leo"</span>)</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[String] = <span class="keyword">List</span>(Leo)</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="keyword">list</span>)</div><div class="line">Hi,Leo!</div><div class="line"></div><div class="line">scala&gt; val <span class="keyword">list</span> =<span class="string">"Leo"</span>::<span class="string">"tail"</span>::Nil</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[String] = <span class="keyword">List</span>(Leo, tail)</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="keyword">list</span>)</div><div class="line">Hi,Leo.</div><div class="line">--------------------------------------------------------------------------</div><div class="line"><span class="comment">// Int类型List不能匹配</span></div><div class="line">scala&gt; val <span class="keyword">list</span>=<span class="number">1</span>::<span class="number">2</span>::<span class="number">3</span>::<span class="number">4</span>::<span class="number">5</span>::Nil</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[<span class="keyword">Int</span>] = <span class="keyword">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="keyword">list</span>)</div><div class="line">&lt;console&gt;:<span class="number">10</span>: error: type mismatch;</div><div class="line"> found   : <span class="keyword">List</span>[<span class="keyword">Int</span>]</div><div class="line"> required: <span class="keyword">List</span>[String]</div><div class="line">              greeting(<span class="keyword">list</span>)</div><div class="line">                       ^</div><div class="line">--------------------------------------------------------------------------</div><div class="line"><span class="comment">// String类型List，默认匹配</span></div><div class="line">scala&gt; val <span class="keyword">list</span> = <span class="string">"1"</span>::<span class="string">"2"</span>::<span class="string">"3"</span>::<span class="string">"4"</span>::<span class="string">"5"</span>::Nil</div><div class="line"><span class="keyword">list</span>: <span class="keyword">List</span>[String] = <span class="keyword">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"></div><div class="line">scala&gt; greeting(<span class="keyword">list</span>)</div><div class="line">hey,who are you ?</div></pre></td></tr></table></figure>
<h3 id="模式匹配之Tuple"><a href="#模式匹配之Tuple" class="headerlink" title="模式匹配之Tuple"></a>模式匹配之Tuple</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//模式匹配之Tuple</span></div><div class="line">def match_tuple(tuple:Any) = tuple match &#123;</div><div class="line"><span class="keyword">case</span> <span class="function">(<span class="params"><span class="number">0</span>,_</span>) =&gt;</span> println(<span class="string">"tuple 0"</span>)  <span class="comment">// 第一个元素是0，第二个元素任意类型</span></div><div class="line"><span class="keyword">case</span> <span class="function">(<span class="params">x,<span class="number">0</span></span>) =&gt;</span> println(<span class="string">"tuple"</span>+x)  <span class="comment">//第一个元素是任意类型，第二个元素是0</span></div><div class="line"><span class="keyword">case</span> <span class="function"><span class="params">_</span>=&gt;</span>println(<span class="string">"other"</span>);</div><div class="line">&#125;</div><div class="line">scala&gt; match_tuple((<span class="number">0</span>,<span class="string">"scala"</span>))</div><div class="line">tuple <span class="number">0</span></div><div class="line"></div><div class="line">scala&gt; match_tuple((<span class="number">2</span>,<span class="number">0</span>))</div><div class="line">tuple2</div><div class="line"></div><div class="line">scala&gt; match_tuple(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">other</div><div class="line"></div><div class="line"><span class="comment">// 测试</span></div><div class="line">--------------------------------------------------------------------------</div><div class="line">scala&gt; match_tuple((<span class="number">0</span>,<span class="string">"scala"</span>))</div><div class="line">tuple <span class="number">0</span></div><div class="line"></div><div class="line">scala&gt; match_tuple((<span class="number">2</span>,<span class="number">0</span>))</div><div class="line">tuple2</div><div class="line"></div><div class="line">scala&gt; match_tuple(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">other</div></pre></td></tr></table></figure>
<h3 id="模式匹配之case-class"><a href="#模式匹配之case-class" class="headerlink" title="模式匹配之case class"></a>模式匹配之case class</h3><ul>
<li><p>Scala中提供了一种特殊的类，用case class进行声明，中文也可以称作样例类。case class其实有点类似于Java中的JavaBean的概念。即只定义field，并且由Scala编译时自动提供getter和setter方法，但是没有method。</p>
</li>
<li><p>case class的主构造函数接收的参数通常不需要使用var或者val修饰，Scala自动就会使用val修饰</p>
</li>
<li><p>Scala自动为case class定义了伴生对象，也就是object，并且定义了apply()方法，该方法接收主构造函数中相同的参数，并返回case class对象。//在伴生对象中提供apply方法让你不用new 关键字就能构造出相应的对象，比如Dollar(29.95)或者Currency(29.95,”EUR”)</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Scala代码：</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></div><div class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">name: <span class="type">String</span>, subject: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Person</span></span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">name: <span class="type">String</span>, classroom: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Person</span></span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">judgeIdentify</span></span>(p: <span class="type">Person</span>) &#123;</div><div class="line"></div><div class="line">p <span class="keyword">match</span> &#123;</div><div class="line">  <span class="keyword">case</span> <span class="type">Teacher</span>(name,subject)=&gt;println(<span class="string">"Teacher:"</span>+name+<span class="string">","</span>+subject)</div><div class="line">  <span class="keyword">case</span> <span class="type">Student</span>(name,classroom)=&gt;println(<span class="string">"Student:"</span>+<span class="string">","</span>+classroom)</div><div class="line">  <span class="keyword">case</span> _=&gt;println(<span class="string">"Illegal access,please go out of the school!"</span>)</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//测试</span></div><div class="line">--------------------------------------------------------------------------</div><div class="line">scala&gt; judgeIdentify(<span class="type">Teacher</span>(<span class="string">"yangz_sh"</span>,<span class="string">"100"</span>))</div><div class="line"><span class="type">Teacher</span>:yangz_sh,<span class="number">100</span></div><div class="line"></div><div class="line">scala&gt; judgeIdentify(<span class="type">Student</span>(<span class="string">"yangz_sh"</span>,<span class="string">"100"</span>))</div><div class="line"><span class="type">Student</span>:,<span class="number">100</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="模式匹配-amp-Option"><a href="#模式匹配-amp-Option" class="headerlink" title="模式匹配 &amp; Option"></a>模式匹配 &amp; Option</h3><ul>
<li><p><strong>Scala有一种特殊的类型，叫做Option。</strong>Option有两种值，一种是Some，表示有值，一种是None，表示没有值。</p>
</li>
<li><p>Option通常会用于模式匹配中，用于判断某个变量是有值还是没值，比null更加简洁明了</p>
</li>
<li><p>Option的用法必须掌握，因为Spark源码中大量地使用了Option，比如Some(a),None这种语法，因此必须看得懂Option模式匹配，才能读懂spark源码。</p>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">  val grades = <span class="built_in">Map</span>(<span class="string">"Leo"</span>-&gt;<span class="string">"A"</span>,<span class="string">"Jack"</span>-&gt;<span class="string">"B"</span>,<span class="string">"Jen"</span>-&gt;<span class="string">"C"</span>)</div><div class="line">  def getGrade(name : <span class="built_in">String</span>)&#123;</div><div class="line">    val grade = grades.<span class="keyword">get</span>(name)</div><div class="line">    grade match&#123;</div><div class="line">      <span class="keyword">case</span> Some(grade)=&gt;println(<span class="string">"your grade is "</span>+grade)</div><div class="line">      <span class="keyword">case</span> None=&gt;println(<span class="string">"Sorry,your grade information is not in the system"</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line"><span class="comment">//测试</span></div><div class="line">--------------------------------------------------------------------------</div><div class="line">scala&gt; getGrade(<span class="string">"Leo"</span>)</div><div class="line">your grade <span class="keyword">is</span> A</div><div class="line"></div><div class="line">scala&gt; getGrade(<span class="string">"Simon"</span>)</div><div class="line">Sorry,your grade information <span class="keyword">is</span> not <span class="keyword">in</span> the system</div></pre></td></tr></table></figure>
<h2 id="Scala-隐式转化"><a href="#Scala-隐式转化" class="headerlink" title="Scala 隐式转化"></a>Scala 隐式转化</h2><p><strong>隐式转换概念了解</strong></p>
<ul>
<li><p>Scala提供的隐式转换和隐式参数功能，是非常有特色的功能，是java等编程语言所没有的功能。它可以<strong>允许手动指定将某种类型的对象转换成其他类型的对象</strong></p>
</li>
<li><p>Scala的隐式转换，其实最核心的就是定义隐式转换函数，即implicit conversion function 。定义的隐式转换函数，只要在编写的程序内引入，就会被Scala自动使用。Scala会根据隐式转换函数的签名，在程序中使用到隐式转换函数接收的参数类型定义的对象时，会自动将其传入隐式转换函数，转换为另外一种类型的对象并返回。这就是“隐式转换”。</p>
</li>
<li><p>隐式转换函数叫什么名字无所谓，因为通常不会由用户手动调用，而是由Scala进行调用。但是如果要使用隐式转换，则需要对隐式转换进行导入。因此通常建议将隐式转换函数的名称命名为”one2one”的形式。</p>
</li>
<li><p>Spark 源码中有大量的隐式转换和隐式参数，因此必须了解语法。</p>
</li>
</ul>
<h3 id="程序可见的范围内定义隐式转换函数"><a href="#程序可见的范围内定义隐式转换函数" class="headerlink" title="程序可见的范围内定义隐式转换函数"></a>程序可见的范围内定义隐式转换函数</h3><ul>
<li><p>要实现隐式转换，只要<strong>程序可见的范围内定义隐式转换函数</strong>即可。Scala会自动使用隐式转换函数。隐式转换函数与普通函数唯一的语法区别就是，要以implicit开头，而且最好要定义函数返回类型。</p>
</li>
<li><p>案例：特殊售票口（只接受特殊人群，比如学生、老人）</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SpecialPerson(val <span class="keyword">name</span> : String )</div><div class="line"><span class="keyword">class</span> Student(val <span class="keyword">name</span> : String)</div><div class="line"><span class="keyword">class</span> Older(val <span class="keyword">name</span> : String)</div><div class="line"></div><div class="line"><span class="keyword">implicit</span> def object2SpecialPerson(obj:Object):SpecialPerson=&#123;</div><div class="line">  <span class="keyword">if</span>(obj.getClass == classOf[Student])&#123;</div><div class="line"></div><div class="line">    val stu = obj.asInstanceOf[Student];</div><div class="line">    new SpecialPerson(stu.<span class="keyword">name</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(obj.getClass == classOf[Older])&#123;</div><div class="line"></div><div class="line">    val older = obj.asInstanceOf[Older];</div><div class="line">    new SpecialPerson(older.<span class="keyword">name</span>)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> Nil</div><div class="line">&#125;</div><div class="line"></div><div class="line">var ticketNumber = <span class="number">0</span>;</div><div class="line">def buySpecialTicket(p:SpecialPerson)=&#123;</div><div class="line">  ticketNumber+=<span class="number">1</span></div><div class="line">  <span class="string">"T-"</span>+ticketNumber</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="在不知不觉中加强现有类型的功能"><a href="#在不知不觉中加强现有类型的功能" class="headerlink" title="在不知不觉中加强现有类型的功能"></a>在不知不觉中加强现有类型的功能</h3><ul>
<li>隐式转换强大之处就是可以<strong>在不知不觉中加强现有类型的功能。</strong>也就是说，可以为某个类定义一个加强版的类，并定义互相之间的隐式转换，从而让源类在使用加强版的方法时，有Scala自动进行隐式转换为加强类，然后再调用改方法。</li>
</ul>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">class</span> Man(val <span class="keyword">name</span> : String)</div><div class="line">  <span class="keyword">class</span> Superman(val <span class="keyword">name</span> : String)&#123;</div><div class="line">    def emitLaser = println(<span class="string">"emit a laster!"</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">implicit</span> def man2superman(man : Man):Superman = new Superman(man.<span class="keyword">name</span>)</div><div class="line">  </div><div class="line"> //测试</div><div class="line">--------------------------------------------------------------------------</div><div class="line">scala&gt;     val leo = new Man(<span class="string">"leo"</span>)</div><div class="line">leo: Man = Man@f55fbc5</div><div class="line"></div><div class="line">scala&gt;     leo.emitLaser</div></pre></td></tr></table></figure>
<h3 id="作用域与导入"><a href="#作用域与导入" class="headerlink" title="作用域与导入"></a>作用域与导入</h3><ul>
<li><p>Scala默认会使用两种隐式转换</p>
<ul>
<li>一种是源类型，或者目标类型的<strong>伴生对象内的隐式转换函数；</strong></li>
<li>一种<strong>是当前程序作用域内</strong>的可以用唯一标识符表示的隐式转换函数。</li>
</ul>
</li>
<li><p>如果隐式转换函数不在上述两种情况下的话，那么就<strong>必须手动使用import语法引入某个包下的隐式转换函数，</strong>比如import test._。通常建议，<strong>仅仅在需要进行隐式转换的地方，比如某个函数或者方法内，用import导入隐式转换函数，</strong>这样可以缩小隐式转换函数的作用域，避免不需要的隐式转换。</p>
</li>
</ul>
<h3 id="发生时机"><a href="#发生时机" class="headerlink" title="发生时机"></a>发生时机</h3><ul>
<li><p>调用某个函数，但是给函数传入的参数的类型，与函数定义的接收参数类型不匹配</p>
</li>
<li><p>使用某个类型的对象，调用某个方法，而这个方法不存在于该类型时</p>
</li>
<li><p>使用某个类型的对象，调用某个方法，虽然该类型有这个方法，但是给方法传入的参数类型，与方法定义的接收参数的类型不匹配</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicketHouse</span>&#123;</span></div><div class="line">  var ticketNumber = <span class="number">0</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">buySpecialTicket</span><span class="params">(<span class="symbol">p:</span>SpecialPerson)</span></span>=&#123;</div><div class="line">    ticketNumber+=<span class="number">1</span></div><div class="line">    <span class="string">"T-"</span>+ticketNumber</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="隐式参数"><a href="#隐式参数" class="headerlink" title="隐式参数"></a>隐式参数</h3><ul>
<li><p>所谓的隐式参数，指的是在函数或者方法中，定义一个用implicit修饰的参数，此时Scala会尝试找到一个指定类型，用implicit修饰的对象，即隐式值，并注入参数</p>
</li>
<li><p>Scala会在两个范围内查找：一种是当前作用域可见的val或var定义的隐式变量；一种是隐式参数类型的伴生对象内的隐式值。</p>
</li>
</ul>
<p>案例：考试签到<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> SignPen&#123;</div><div class="line"></div><div class="line">  def <span class="built_in">write</span>(content:String) = println(content)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">implicit</span> val signPen = new SignPen</div><div class="line"></div><div class="line">def signForExam(<span class="keyword">name</span>:String)(<span class="keyword">implicit</span> signPen:SignPen): <span class="keyword">Unit</span> =&#123;</div><div class="line">signPen.<span class="built_in">write</span>(<span class="keyword">name</span> + <span class="string">"come to exam in time ."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://yangzsh.github.io/2016/12/28/Scala基本语法和知识点/" data-id="ciy3y294f00009sqzvrt2jqlt" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Scala语法/">Scala语法</a></div><div class="post-nav"><a href="/2017/01/09/Spark源码编译/" class="pre">Spark源码编译</a><a href="/2016/11/30/memcached缓存安装配置/" class="next">memcached缓存安装配置</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://yangzsh.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HBase二次索引/">HBase二次索引</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Scala/">Scala</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spark/">Spark</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Scala语法/" style="font-size: 15px;">Scala语法</a> <a href="/tags/Spark源码编译/" style="font-size: 15px;">Spark源码编译</a> <a href="/tags/Phoenix/" style="font-size: 15px;">Phoenix</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/使用Phoenix将SQL代码移植至HBase/">使用Phoenix将SQL代码移植至HBase</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Spark源码编译/">Spark源码编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/28/Scala基本语法和知识点/">Scala基本语法和知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/30/memcached缓存安装配置/">memcached缓存安装配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/30/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>